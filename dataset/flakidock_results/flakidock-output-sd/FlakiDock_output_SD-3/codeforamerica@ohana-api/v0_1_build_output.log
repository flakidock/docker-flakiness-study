#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile:
#1 transferring dockerfile: 700B done
#1 DONE 0.3s

#2 [internal] load .dockerignore
#2 transferring context: 70B done
#2 DONE 0.4s

#3 [auth] library/ruby:pull token for registry-1.docker.io
#3 DONE 0.0s

#4 [internal] load metadata for docker.io/library/ruby:2.7.5
#4 DONE 1.5s

#5 [ 1/10] FROM docker.io/library/ruby:2.7.5@sha256:365df8a52b0cb34939e59c69136f7488aa8d7a8f4c2711af0a1bc25b8e8e6471
#5 resolve docker.io/library/ruby:2.7.5@sha256:365df8a52b0cb34939e59c69136f7488aa8d7a8f4c2711af0a1bc25b8e8e6471
#5 resolve docker.io/library/ruby:2.7.5@sha256:365df8a52b0cb34939e59c69136f7488aa8d7a8f4c2711af0a1bc25b8e8e6471 0.3s done
#5 ...

#6 [internal] load build context
#6 transferring context: 1.19MB 0.1s done
#6 DONE 0.4s

#5 [ 1/10] FROM docker.io/library/ruby:2.7.5@sha256:365df8a52b0cb34939e59c69136f7488aa8d7a8f4c2711af0a1bc25b8e8e6471
#5 sha256:e7c13114124cf17427e1f909e20aea6abc62b0037c3b382908b16cadb568a956 7.29kB / 7.29kB done
#5 sha256:365df8a52b0cb34939e59c69136f7488aa8d7a8f4c2711af0a1bc25b8e8e6471 1.86kB / 1.86kB done
#5 sha256:be21dca200ab4fe84635075c00c983d2f6908eda7765bb20fb6c9d1d6f43f6d4 2.00kB / 2.00kB done
#5 sha256:9baf437a1badb6aad2dae5f2cd4a7b53a6c7ab6c14cba1ed1ecb42b4822b0e87 4.19MB / 5.16MB 0.2s
#5 sha256:dbba69284b2786013fe94fefe0c2e66a7d3cecbb20f6d691d71dac891ee37be5 0B / 54.94MB 0.2s
#5 sha256:6ade5c59e324bd7cf369c72ad781c23d37e8fb48c9bbb4abbecafafd9be4cc35 0B / 10.87MB 0.2s
#5 sha256:9baf437a1badb6aad2dae5f2cd4a7b53a6c7ab6c14cba1ed1ecb42b4822b0e87 5.16MB / 5.16MB 0.4s done
#5 sha256:dbba69284b2786013fe94fefe0c2e66a7d3cecbb20f6d691d71dac891ee37be5 4.19MB / 54.94MB 0.4s
#5 sha256:6ade5c59e324bd7cf369c72ad781c23d37e8fb48c9bbb4abbecafafd9be4cc35 10.87MB / 10.87MB 0.4s
#5 sha256:dbba69284b2786013fe94fefe0c2e66a7d3cecbb20f6d691d71dac891ee37be5 23.07MB / 54.94MB 0.6s
#5 sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d 3.15MB / 54.58MB 0.6s
#5 sha256:dbba69284b2786013fe94fefe0c2e66a7d3cecbb20f6d691d71dac891ee37be5 35.65MB / 54.94MB 0.8s
#5 sha256:6ade5c59e324bd7cf369c72ad781c23d37e8fb48c9bbb4abbecafafd9be4cc35 10.87MB / 10.87MB 0.6s done
#5 sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d 13.63MB / 54.58MB 0.8s
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 0B / 196.55MB 0.8s
#5 sha256:dbba69284b2786013fe94fefe0c2e66a7d3cecbb20f6d691d71dac891ee37be5 46.14MB / 54.94MB 1.0s
#5 sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d 22.02MB / 54.58MB 1.0s
#5 sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d 25.17MB / 54.58MB 1.1s
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 10.49MB / 196.55MB 1.1s
#5 sha256:dbba69284b2786013fe94fefe0c2e66a7d3cecbb20f6d691d71dac891ee37be5 52.43MB / 54.94MB 1.2s
#5 sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d 33.55MB / 54.58MB 1.4s
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 30.41MB / 196.55MB 1.4s
#5 sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d 36.70MB / 54.58MB 1.5s
#5 sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d 42.99MB / 54.58MB 1.7s
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 56.62MB / 196.55MB 1.7s
#5 sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d 49.28MB / 54.58MB 1.9s
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 74.45MB / 196.55MB 1.9s
#5 sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d 54.58MB / 54.58MB 2.1s
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 90.18MB / 196.55MB 2.1s
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 100.66MB / 196.55MB 2.2s
#5 extracting sha256:dbba69284b2786013fe94fefe0c2e66a7d3cecbb20f6d691d71dac891ee37be5
#5 sha256:dbba69284b2786013fe94fefe0c2e66a7d3cecbb20f6d691d71dac891ee37be5 54.94MB / 54.94MB 2.1s done
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 117.44MB / 196.55MB 2.4s
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 127.93MB / 196.55MB 2.5s
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 147.85MB / 196.55MB 2.7s
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 167.77MB / 196.55MB 2.9s
#5 sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d 54.58MB / 54.58MB 3.0s done
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 187.70MB / 196.55MB 3.1s
#5 sha256:26e7ceebb0b46999ab07630803680603213e4d63c622a1c2ff6efaf4cf86cbc6 0B / 200B 3.1s
#5 sha256:c8f524f16a068a0f55c941654dc16c5d1ec91917c36541c3de6a523fcc3cc5a8 0B / 14.55MB 3.2s
#5 sha256:26e7ceebb0b46999ab07630803680603213e4d63c622a1c2ff6efaf4cf86cbc6 200B / 200B 3.3s
#5 sha256:c8f524f16a068a0f55c941654dc16c5d1ec91917c36541c3de6a523fcc3cc5a8 4.19MB / 14.55MB 3.3s
#5 sha256:c8f524f16a068a0f55c941654dc16c5d1ec91917c36541c3de6a523fcc3cc5a8 13.63MB / 14.55MB 3.4s
#5 sha256:c8f524f16a068a0f55c941654dc16c5d1ec91917c36541c3de6a523fcc3cc5a8 14.55MB / 14.55MB 3.5s
#5 extracting sha256:dbba69284b2786013fe94fefe0c2e66a7d3cecbb20f6d691d71dac891ee37be5 3.0s done
#5 sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 196.55MB / 196.55MB 6.3s done
#5 sha256:26e7ceebb0b46999ab07630803680603213e4d63c622a1c2ff6efaf4cf86cbc6 200B / 200B 6.4s done
#5 sha256:c8f524f16a068a0f55c941654dc16c5d1ec91917c36541c3de6a523fcc3cc5a8 14.55MB / 14.55MB 6.6s done
#5 extracting sha256:9baf437a1badb6aad2dae5f2cd4a7b53a6c7ab6c14cba1ed1ecb42b4822b0e87 0.1s
#5 sha256:9a9ba15b18086dad0de8d3da908331504622b4a2fcd2e0f5ae168dd125951684 0B / 175B 6.8s
#5 sha256:9a9ba15b18086dad0de8d3da908331504622b4a2fcd2e0f5ae168dd125951684 175B / 175B 6.9s done
#5 extracting sha256:9baf437a1badb6aad2dae5f2cd4a7b53a6c7ab6c14cba1ed1ecb42b4822b0e87 0.3s done
#5 extracting sha256:6ade5c59e324bd7cf369c72ad781c23d37e8fb48c9bbb4abbecafafd9be4cc35
#5 extracting sha256:6ade5c59e324bd7cf369c72ad781c23d37e8fb48c9bbb4abbecafafd9be4cc35 0.4s done
#5 extracting sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d
#5 extracting sha256:b19a994f6d4cdbb620339bd2e4ad47b229f14276b542060622ae447649294e5d 3.4s done
#5 extracting sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd
#5 extracting sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 5.1s
#5 extracting sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 10.2s
#5 extracting sha256:8fc2294f89de5e20d0ae12149d6136444bcb8c775ea745f06f2eb775ab4504cd 10.9s done
#5 extracting sha256:26e7ceebb0b46999ab07630803680603213e4d63c622a1c2ff6efaf4cf86cbc6
#5 extracting sha256:26e7ceebb0b46999ab07630803680603213e4d63c622a1c2ff6efaf4cf86cbc6 done
#5 extracting sha256:c8f524f16a068a0f55c941654dc16c5d1ec91917c36541c3de6a523fcc3cc5a8
#5 extracting sha256:c8f524f16a068a0f55c941654dc16c5d1ec91917c36541c3de6a523fcc3cc5a8 0.7s done
#5 extracting sha256:9a9ba15b18086dad0de8d3da908331504622b4a2fcd2e0f5ae168dd125951684
#5 extracting sha256:9a9ba15b18086dad0de8d3da908331504622b4a2fcd2e0f5ae168dd125951684 done
#5 DONE 25.9s

#7 [ 2/10] RUN apt-get update     && apt-get install -y --no-install-recommends postgresql-client     && rm -rf /var/lib/apt/lists/*
#7 0.486 Get:1 http://deb.debian.org/debian bullseye InRelease [116 kB]
#7 0.486 Get:2 http://security.debian.org/debian-security bullseye-security InRelease [48.4 kB]
#7 0.514 Get:3 http://deb.debian.org/debian bullseye-updates InRelease [44.1 kB]
#7 0.630 Get:4 http://security.debian.org/debian-security bullseye-security/main amd64 Packages [280 kB]
#7 0.745 Get:5 http://deb.debian.org/debian bullseye/main amd64 Packages [8067 kB]
#7 0.854 Get:6 http://deb.debian.org/debian bullseye-updates/main amd64 Packages [18.8 kB]
#7 2.047 Fetched 8574 kB in 2s (5399 kB/s)
#7 2.047 Reading package lists...
#7 2.675 Reading package lists...
#7 3.299 Building dependency tree...
#7 3.418 Reading state information...
#7 3.543 The following additional packages will be installed:
#7 3.544   libpq-dev libpq5 postgresql-client-13 postgresql-client-common
#7 3.544 Suggested packages:
#7 3.544   postgresql-doc-13 postgresql-13
#7 3.603 The following NEW packages will be installed:
#7 3.604   postgresql-client postgresql-client-13 postgresql-client-common
#7 3.604 The following packages will be upgraded:
#7 3.605   libpq-dev libpq5
#7 3.640 2 upgraded, 3 newly installed, 0 to remove and 157 not upgraded.
#7 3.640 Need to get 1991 kB of archives.
#7 3.640 After this operation, 6907 kB of additional disk space will be used.
#7 3.640 Get:1 http://deb.debian.org/debian bullseye/main amd64 libpq-dev amd64 13.15-0+deb11u1 [142 kB]
#7 3.671 Get:2 http://deb.debian.org/debian bullseye/main amd64 libpq5 amd64 13.15-0+deb11u1 [182 kB]
#7 3.675 Get:3 http://deb.debian.org/debian bullseye/main amd64 postgresql-client-common all 225+deb11u1 [89.4 kB]
#7 3.983 Get:4 http://deb.debian.org/debian bullseye/main amd64 postgresql-client-13 amd64 13.15-0+deb11u1 [1513 kB]
#7 4.591 Get:5 http://deb.debian.org/debian bullseye/main amd64 postgresql-client all 13+225+deb11u1 [64.9 kB]
#7 4.825 debconf: delaying package configuration, since apt-utils is not installed
#7 4.899 Fetched 1991 kB in 1s (2026 kB/s)
#7 4.969 (Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 22741 files and directories currently installed.)
#7 4.983 Preparing to unpack .../libpq-dev_13.15-0+deb11u1_amd64.deb ...
#7 5.064 Unpacking libpq-dev (13.15-0+deb11u1) over (13.5-0+deb11u1) ...
#7 5.856 Preparing to unpack .../libpq5_13.15-0+deb11u1_amd64.deb ...
#7 5.975 Unpacking libpq5:amd64 (13.15-0+deb11u1) over (13.5-0+deb11u1) ...
#7 6.812 Selecting previously unselected package postgresql-client-common.
#7 6.815 Preparing to unpack .../postgresql-client-common_225+deb11u1_all.deb ...
#7 6.841 Unpacking postgresql-client-common (225+deb11u1) ...
#7 7.062 Selecting previously unselected package postgresql-client-13.
#7 7.066 Preparing to unpack .../postgresql-client-13_13.15-0+deb11u1_amd64.deb ...
#7 7.093 Unpacking postgresql-client-13 (13.15-0+deb11u1) ...
#7 7.589 Selecting previously unselected package postgresql-client.
#7 7.591 Preparing to unpack .../postgresql-client_13+225+deb11u1_all.deb ...
#7 7.618 Unpacking postgresql-client (13+225+deb11u1) ...
#7 7.798 Setting up postgresql-client-common (225+deb11u1) ...
#7 7.929 Setting up libpq5:amd64 (13.15-0+deb11u1) ...
#7 8.004 Setting up libpq-dev (13.15-0+deb11u1) ...
#7 8.080 Setting up postgresql-client-13 (13.15-0+deb11u1) ...
#7 8.777 update-alternatives: using /usr/share/postgresql/13/man/man1/psql.1.gz to provide /usr/share/man/man1/psql.1.gz (psql.1.gz) in auto mode
#7 8.970 Setting up postgresql-client (13+225+deb11u1) ...
#7 12.99 Processing triggers for libc-bin (2.31-13+deb11u3) ...
#7 DONE 30.5s

#8 [ 3/10] RUN mkdir /usr/local/node     && curl -L https://nodejs.org/dist/v4.4.7/node-v4.4.7-linux-x64.tar.xz | tar Jx -C /usr/local/node --strip-components=1
#8 0.583   % Total    % Received % Xferd  Average Speed   Time    Time     Time  Current
#8 0.583                                  Dload  Upload   Total   Spent    Left  Speed
#8 0.583   0     0    0     0    0     0      0      0 --:--:-- --:--:-- --:--:--     0 51 8119k   51 4156k    0     0  7370k      0  0:00:01 --:--:--  0:00:01 7357k100 8119k  100 8119k    0     0  7696k      0  0:00:01  0:00:01 --:--:-- 7696k
#8 DONE 2.7s

#9 [ 4/10] RUN ln -s ../node/bin/node /usr/local/bin/
#9 DONE 0.9s

#10 [ 5/10] WORKDIR /ohana-api
#10 DONE 0.3s

#11 [ 6/10] COPY Gemfile /ohana-api
#11 DONE 0.3s

#12 [ 7/10] COPY Gemfile.lock /ohana-api
#12 DONE 0.3s

#13 [ 8/10] RUN gem install bundler
#13 27.55 ERROR:  Error installing bundler:
#13 27.55 	The last version of bundler (>= 0) to support your Ruby & RubyGems was 2.4.22. Try installing it with `gem install bundler -v 2.4.22`
#13 27.55 	bundler requires Ruby version >= 3.0.0. The current ruby version is 2.7.5.203.
#13 ERROR: process "/bin/sh -c gem install bundler" did not complete successfully: exit code: 1
------
 > [ 8/10] RUN gem install bundler:
27.55 ERROR:  Error installing bundler:
27.55 	The last version of bundler (>= 0) to support your Ruby & RubyGems was 2.4.22. Try installing it with `gem install bundler -v 2.4.22`
27.55 	bundler requires Ruby version >= 3.0.0. The current ruby version is 2.7.5.203.
------
Dockerfile:17
--------------------
  15 |     COPY Gemfile.lock /ohana-api
  16 |     
  17 | >>> RUN gem install bundler
  18 |     RUN bundle install --jobs 20 --retry 5 --without production
  19 |     
--------------------
ERROR: failed to solve: process "/bin/sh -c gem install bundler" did not complete successfully: exit code: 1
Duration: 1:31.30