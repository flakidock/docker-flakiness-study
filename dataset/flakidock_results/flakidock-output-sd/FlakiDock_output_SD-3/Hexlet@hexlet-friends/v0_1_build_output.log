#0 building with "default" instance using docker driver

#1 [internal] load build definition from Dockerfile
#1 transferring dockerfile:
#1 transferring dockerfile: 785B done
#1 DONE 0.3s

#2 [internal] load .dockerignore
#2 transferring context: 183B done
#2 DONE 0.4s

#3 [internal] load metadata for docker.io/library/python:3.11-alpine
#3 ...

#4 [auth] library/python:pull token for registry-1.docker.io
#4 DONE 0.0s

#3 [internal] load metadata for docker.io/library/python:3.11-alpine
#3 DONE 1.6s

#5 [internal] load build context
#5 DONE 0.0s

#6 [1/7] FROM docker.io/library/python:3.11-alpine@sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc
#6 resolve docker.io/library/python:3.11-alpine@sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc
#6 resolve docker.io/library/python:3.11-alpine@sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc 0.2s done
#6 sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc 9.02kB / 9.02kB done
#6 sha256:0b67dc0654fc86ba05d925a0d5950a78282e6bb11c283215bb300d8ba18401c1 1.93kB / 1.93kB done
#6 sha256:bbec71259b0e09cf66965efb16e7480dd161e6e2da21d14e617863a4b7e32480 6.29kB / 6.29kB done
#6 sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 0B / 3.62MB 0.1s
#6 ...

#5 [internal] load build context
#5 transferring context: 97.75kB done
#5 DONE 0.3s

#6 [1/7] FROM docker.io/library/python:3.11-alpine@sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc
#6 sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 0B / 12.67MB 0.2s
#6 sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 3.62MB / 3.62MB 0.3s
#6 sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 4.19MB / 12.67MB 0.3s
#6 sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7 0B / 461.80kB 0.3s
#6 sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 3.62MB / 3.62MB 0.3s done
#6 sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 12.67MB / 12.67MB 0.5s
#6 sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7 461.80kB / 461.80kB 0.5s done
#6 extracting sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6
#6 sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1 0B / 229B 0.5s
#6 extracting sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 0.2s done
#6 sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1 229B / 229B 0.6s
#6 sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 12.67MB / 12.67MB 0.7s done
#6 sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1 229B / 229B 0.9s done
#6 extracting sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7
#6 sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 0B / 3.13MB 0.9s
#6 extracting sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7 0.2s done
#6 sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 3.13MB / 3.13MB 1.0s
#6 sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 3.13MB / 3.13MB 1.1s done
#6 extracting sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7
#6 extracting sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 0.7s done
#6 extracting sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1
#6 extracting sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1 done
#6 extracting sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d
#6 extracting sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 0.3s done
#6 DONE 4.1s

#7 [2/7] RUN apk add --no-cache     gcc     musl-dev     postgresql-dev     libffi-dev     openssl-dev     cargo     curl     gettext     git     make
#7 0.432 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/x86_64/APKINDEX.tar.gz
#7 0.671 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/x86_64/APKINDEX.tar.gz
#7 1.166 (1/58) Installing libgcc (13.2.1_git20240309-r0)
#7 1.171 (2/58) Installing jansson (2.14-r4)
#7 1.174 (3/58) Installing libstdc++ (13.2.1_git20240309-r0)
#7 1.200 (4/58) Installing zstd-libs (1.5.6-r0)
#7 1.213 (5/58) Installing binutils (2.42-r0)
#7 3.234 (6/58) Installing libgomp (13.2.1_git20240309-r0)
#7 3.254 (7/58) Installing libatomic (13.2.1_git20240309-r0)
#7 3.257 (8/58) Installing gmp (6.3.0-r1)
#7 3.266 (9/58) Installing isl26 (0.26-r1)
#7 3.291 (10/58) Installing mpfr4 (4.2.1-r0)
#7 3.302 (11/58) Installing mpc1 (1.3.1-r1)
#7 3.306 (12/58) Installing gcc (13.2.1_git20240309-r0)
#7 4.519 (13/58) Installing musl-dev (1.2.5-r0)
#7 4.625 (14/58) Installing libxml2 (2.12.7-r0)
#7 4.642 (15/58) Installing llvm17-libs (17.0.6-r1)
#7 5.922 (16/58) Installing scudo-malloc (17.0.6-r0)
#7 5.927 (17/58) Installing rust (1.78.0-r0)
#7 11.06 (18/58) Installing brotli-libs (1.1.0-r2)
#7 11.07 (19/58) Installing c-ares (1.28.1-r0)
#7 11.08 (20/58) Installing libunistring (1.2-r0)
#7 11.10 (21/58) Installing libidn2 (2.3.7-r0)
#7 11.11 (22/58) Installing nghttp2-libs (1.62.1-r0)
#7 11.11 (23/58) Installing libpsl (0.21.5-r1)
#7 11.12 (24/58) Installing libcurl (8.9.0-r0)
#7 11.13 (25/58) Installing cargo (1.78.0-r0)
#7 11.34 (26/58) Installing curl (8.9.0-r0)
#7 11.34 (27/58) Installing gettext-envsubst (0.22.5-r0)
#7 11.35 (28/58) Installing gettext-libs (0.22.5-r0)
#7 11.36 (29/58) Installing gettext (0.22.5-r0)
#7 11.39 (30/58) Installing pcre2 (10.43-r0)
#7 11.40 (31/58) Installing git (2.45.2-r0)
#7 11.50 (32/58) Installing git-init-template (2.45.2-r0)
#7 11.50 (33/58) Installing linux-headers (6.6-r0)
#7 11.70 (34/58) Installing pkgconf (2.2.0-r0)
#7 11.70 (35/58) Installing libffi-dev (3.4.6-r0)
#7 11.71 (36/58) Installing make (4.4.1-r2)
#7 11.72 (37/58) Installing openssl-dev (3.3.1-r3)
#7 11.75 (38/58) Installing libpq (16.3-r0)
#7 11.76 (39/58) Installing libpq-dev (16.3-r0)
#7 11.79 (40/58) Installing libecpg (16.3-r0)
#7 11.96 (41/58) Installing libecpg-dev (16.3-r0)
#7 12.00 (42/58) Installing clang16-headers (16.0.6-r5)
#7 12.14 (43/58) Installing llvm16-libs (16.0.6-r8)
#7 13.33 (44/58) Installing clang16-libs (16.0.6-r5)
#7 14.35 (45/58) Installing fortify-headers (1.1-r3)
#7 14.36 (46/58) Installing libstdc++-dev (13.2.1_git20240309-r0)
#7 14.65 (47/58) Installing llvm16-linker-tools (16.0.6-r8)
#7 14.66 (48/58) Installing clang16 (16.0.6-r5)
#7 14.68 (49/58) Installing icu-data-en (74.2-r0)
#7 14.71 Executing icu-data-en-74.2-r0.post-install
#7 14.71 *
#7 14.71 * If you need ICU with non-English locales and legacy charset support, install
#7 14.71 * package icu-data-full.
#7 14.71 *
#7 14.71 (50/58) Installing icu-libs (74.2-r0)
#7 14.76 (51/58) Installing icu (74.2-r0)
#7 15.65 (52/58) Installing icu-dev (74.2-r0)
#7 16.64 (53/58) Installing llvm16 (16.0.6-r8)
#7 17.79 (54/58) Installing lz4-libs (1.9.4-r5)
#7 17.79 (55/58) Installing lz4-dev (1.9.4-r5)
#7 17.80 (56/58) Installing zstd (1.5.6-r0)
#7 17.81 (57/58) Installing zstd-dev (1.5.6-r0)
#7 17.81 (58/58) Installing postgresql16-dev (16.3-r0)
#7 18.02 Executing busybox-1.36.1-r29.trigger
#7 18.03 OK: 1269 MiB in 95 packages
#7 DONE 42.9s

#8 [3/7] RUN curl -sSL https://install.python-poetry.org | python3 -     && poetry --version
#8 1.251 Retrieving Poetry metadata
#8 1.370 
#8 1.376 # Welcome to Poetry!
#8 1.376 
#8 1.376 This will download and install the latest version of Poetry,
#8 1.376 a dependency and package manager for Python.
#8 1.376 
#8 1.376 It will add the `poetry` command to Poetry's bin directory, located at:
#8 1.376 
#8 1.376 /root/.local/bin
#8 1.376 
#8 1.376 You can uninstall at any time by executing this script with the --uninstall option,
#8 1.376 and these changes will be reverted.
#8 1.376 
#8 1.377 Installing Poetry (1.2.2)
#8 1.377 Installing Poetry (1.2.2): Creating environment
#8 11.78 Installing Poetry (1.2.2): Installing Poetry
#8 34.81 Installing Poetry (1.2.2): Creating script
#8 34.81 Installing Poetry (1.2.2): Done
#8 34.81 
#8 34.81 Poetry (1.2.2) is installed now. Great!
#8 34.81 
#8 34.81 You can test that everything is set up by executing:
#8 34.81 
#8 34.81 `poetry --version`
#8 34.81 
#8 35.75 Poetry (version 1.2.2)
#8 DONE 37.6s

#9 [4/7] WORKDIR /project/
#9 DONE 0.4s

#10 [5/7] COPY pyproject.toml poetry.lock ./
#10 DONE 0.4s

#11 [6/7] RUN poetry install --extras psycopg2-binary
#11 1.856 Skipping virtualenv creation, as specified in config file.
#11 3.309 Installing dependencies from lock file
#11 5.815 
#11 5.815 Package operations: 68 installs, 1 update, 0 removals
#11 5.815 
#11 5.816   • Installing smmap (5.0.0)
#11 8.781   • Installing gitdb (4.0.10)
#11 8.783   • Installing mccabe (0.6.1)
#11 8.785   • Installing pbr (5.11.1)
#11 8.787   • Installing pycodestyle (2.8.0)
#11 8.789   • Installing pyflakes (2.4.0)
#11 11.64   • Installing docutils (0.19)
#11 11.64   • Installing flake8 (4.0.1)
#11 11.64   • Installing gitpython (3.1.30)
#11 11.64   • Installing pyyaml (6.0)
#11 11.64   • Installing snowballstemmer (2.2.0)
#11 11.64   • Installing stevedore (4.1.1)
#11 11.65   • Installing tzdata (2022.7)
#11 23.89 
#11 23.89   CalledProcessError
#11 23.89 
#11 23.89   Command '['/usr/local/bin/python3.11', '-m', 'pip', 'install', '--use-pep517', '--disable-pip-version-check', '--prefix', '/usr/local', '--no-deps', '/var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz']' returned non-zero exit status 1.
#11 23.89 
#11 23.89   at /usr/local/lib/python3.11/subprocess.py:571 in run
#11 24.01        567│             # We don't call process.wait() as .__exit__ does that for us.
#11 24.01        568│             raise
#11 24.01        569│         retcode = process.poll()
#11 24.01        570│         if check and retcode:
#11 24.01     →  571│             raise CalledProcessError(retcode, process.args,
#11 24.01        572│                                      output=stdout, stderr=stderr)
#11 24.01        573│     return CompletedProcess(process.args, retcode, stdout, stderr)
#11 24.01        574│ 
#11 24.01        575│ 
#11 24.01 
#11 24.01 The following error occurred when trying to handle this error:
#11 24.01 
#11 24.01 
#11 24.01   EnvCommandError
#11 24.01 
#11 24.01   Command ['/usr/local/bin/python3.11', '-m', 'pip', 'install', '--use-pep517', '--disable-pip-version-check', '--prefix', '/usr/local', '--no-deps', '/var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz'] errored with the following return code 1, and output: 
#11 24.01   Processing /var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz
#11 24.01     Installing build dependencies: started
#11 24.01     Installing build dependencies: finished with status 'done'
#11 24.01     Getting requirements to build wheel: started
#11 24.01     Getting requirements to build wheel: finished with status 'error'
#11 24.01     error: subprocess-exited-with-error
#11 24.01     
#11 24.01     × Getting requirements to build wheel did not run successfully.
#11 24.01     │ exit code: 1
#11 24.01     ╰─> [54 lines of output]
#11 24.01         running egg_info
#11 24.01         writing lib/PyYAML.egg-info/PKG-INFO
#11 24.01         writing dependency_links to lib/PyYAML.egg-info/dependency_links.txt
#11 24.01         writing top-level names to lib/PyYAML.egg-info/top_level.txt
#11 24.01         Traceback (most recent call last):
#11 24.01           File "/usr/local/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 353, in <module>
#11 24.01             main()
#11 24.01           File "/usr/local/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 335, in main
#11 24.01             json_out['return_val'] = hook(**hook_input['kwargs'])
#11 24.01                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#11 24.01           File "/usr/local/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 118, in get_requires_for_build_wheel
#11 24.01             return hook(config_settings)
#11 24.01                    ^^^^^^^^^^^^^^^^^^^^^
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/build_meta.py", line 327, in get_requires_for_build_wheel
#11 24.01             return self._get_build_requires(config_settings, requirements=[])
#11 24.01                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/build_meta.py", line 297, in _get_build_requires
#11 24.01             self.run_setup()
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/build_meta.py", line 313, in run_setup
#11 24.01             exec(code, locals())
#11 24.01           File "<string>", line 288, in <module>
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/__init__.py", line 108, in setup
#11 24.01             return distutils.core.setup(**attrs)
#11 24.01                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/_distutils/core.py", line 184, in setup
#11 24.01             return run_commands(dist)
#11 24.01                    ^^^^^^^^^^^^^^^^^^
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/_distutils/core.py", line 200, in run_commands
#11 24.01             dist.run_commands()
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/_distutils/dist.py", line 970, in run_commands
#11 24.01             self.run_command(cmd)
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/dist.py", line 945, in run_command
#11 24.01             super().run_command(command)
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/_distutils/dist.py", line 989, in run_command
#11 24.01             cmd_obj.run()
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 310, in run
#11 24.01             self.find_sources()
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 318, in find_sources
#11 24.01             mm.run()
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 539, in run
#11 24.01             self.add_defaults()
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 577, in add_defaults
#11 24.01             sdist.add_defaults(self)
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/command/sdist.py", line 102, in add_defaults
#11 24.01             super().add_defaults()
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/_distutils/command/sdist.py", line 250, in add_defaults
#11 24.01             self._add_defaults_ext()
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/_distutils/command/sdist.py", line 335, in _add_defaults_ext
#11 24.01             self.filelist.extend(build_ext.get_source_files())
#11 24.01                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#11 24.01           File "<string>", line 204, in get_source_files
#11 24.01           File "/tmp/pip-build-env-7vc0428o/overlay/lib/python3.11/site-packages/setuptools/_distutils/cmd.py", line 107, in __getattr__
#11 24.01             raise AttributeError(attr)
#11 24.01         AttributeError: cython_sources
#11 24.01         [end of output]
#11 24.01     
#11 24.01     note: This error originates from a subprocess, and is likely not a problem with pip.
#11 24.01   error: subprocess-exited-with-error
#11 24.01   
#11 24.01   × Getting requirements to build wheel did not run successfully.
#11 24.01   │ exit code: 1
#11 24.01   ╰─> See above for output.
#11 24.01   
#11 24.01   note: This error originates from a subprocess, and is likely not a problem with pip.
#11 24.01   
#11 24.01 
#11 24.01   at ~/.local/share/pypoetry/venv/lib/python3.11/site-packages/poetry/utils/env.py:1476 in _run
#11 24.13       1472│                 output = subprocess.check_output(
#11 24.13       1473│                     command, stderr=subprocess.STDOUT, env=env, **kwargs
#11 24.13       1474│                 )
#11 24.13       1475│         except CalledProcessError as e:
#11 24.13     → 1476│             raise EnvCommandError(e, input=input_)
#11 24.13       1477│ 
#11 24.13       1478│         return decode(output)
#11 24.13       1479│ 
#11 24.13       1480│     def execute(self, bin: str, *args: str, **kwargs: Any) -> int:
#11 24.13 
#11 24.13 The following error occurred when trying to handle this error:
#11 24.13 
#11 24.13 
#11 24.13   PoetryException
#11 24.13 
#11 24.13   Failed to install /var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz
#11 24.13 
#11 24.13   at ~/.local/share/pypoetry/venv/lib/python3.11/site-packages/poetry/utils/pip.py:51 in pip_install
#11 24.13        47│ 
#11 24.13        48│     try:
#11 24.13        49│         return environment.run_pip(*args)
#11 24.13        50│     except EnvCommandError as e:
#11 24.13     →  51│         raise PoetryException(f"Failed to install {path.as_posix()}") from e
#11 24.13        52│ 
#11 24.13 
#11 ERROR: process "/bin/sh -c poetry install --extras psycopg2-binary" did not complete successfully: exit code: 1
------
 > [6/7] RUN poetry install --extras psycopg2-binary:
24.13   Failed to install /var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz
24.13 
24.13   at ~/.local/share/pypoetry/venv/lib/python3.11/site-packages/poetry/utils/pip.py:51 in pip_install
24.13        47│ 
24.13        48│     try:
24.13        49│         return environment.run_pip(*args)
24.13        50│     except EnvCommandError as e:
24.13     →  51│         raise PoetryException(f"Failed to install {path.as_posix()}") from e
24.13        52│ 
24.13 
------
Dockerfile:32
--------------------
  30 |     COPY pyproject.toml poetry.lock ./
  31 |     
  32 | >>> RUN poetry install --extras psycopg2-binary
  33 |     
  34 |     WORKDIR /usr/local/src/hexlet-friends
--------------------
ERROR: failed to solve: process "/bin/sh -c poetry install --extras psycopg2-binary" did not complete successfully: exit code: 1
Duration: 1:52.75