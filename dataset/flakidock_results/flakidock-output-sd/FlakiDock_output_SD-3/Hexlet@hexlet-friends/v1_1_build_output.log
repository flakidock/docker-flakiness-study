#0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 ...

#2 [internal] load build definition from v1_Dockerfile
#2 transferring dockerfile: 866B done
#2 DONE 0.3s

#1 [internal] load .dockerignore
#1 transferring context: 183B done
#1 DONE 0.4s

#3 [internal] load metadata for docker.io/library/python:3.11-alpine
#3 DONE 1.1s

#4 [internal] load build context
#4 DONE 0.0s

#5 [1/8] FROM docker.io/library/python:3.11-alpine@sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc
#5 resolve docker.io/library/python:3.11-alpine@sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc
#5 resolve docker.io/library/python:3.11-alpine@sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc 0.2s done
#5 sha256:bbec71259b0e09cf66965efb16e7480dd161e6e2da21d14e617863a4b7e32480 6.29kB / 6.29kB done
#5 sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc 9.02kB / 9.02kB done
#5 sha256:0b67dc0654fc86ba05d925a0d5950a78282e6bb11c283215bb300d8ba18401c1 1.93kB / 1.93kB done
#5 sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 0B / 12.67MB 0.2s
#5 ...

#4 [internal] load build context
#4 transferring context: 97.75kB done
#4 DONE 0.3s

#5 [1/8] FROM docker.io/library/python:3.11-alpine@sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc
#5 sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 12.67MB / 12.67MB 0.4s
#5 sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 1.05MB / 3.62MB 0.4s
#5 sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7 0B / 461.80kB 0.4s
#5 sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 3.62MB / 3.62MB 0.5s
#5 sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7 461.80kB / 461.80kB 0.5s
#5 sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 12.67MB / 12.67MB 0.6s done
#5 sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7 461.80kB / 461.80kB 0.6s done
#5 extracting sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6
#5 sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 3.62MB / 3.62MB 0.7s done
#5 sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 0B / 3.13MB 0.8s
#5 extracting sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 0.2s done
#5 sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 3.13MB / 3.13MB 1.0s
#5 sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1 229B / 229B 1.0s
#5 sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 3.13MB / 3.13MB 1.1s done
#5 extracting sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7
#5 sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1 229B / 229B 1.1s done
#5 extracting sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7 0.2s done
#5 extracting sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7
#5 extracting sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 0.7s done
#5 extracting sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1
#5 extracting sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1 done
#5 extracting sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d
#5 extracting sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 0.3s done
#5 DONE 4.6s

#6 [2/8] RUN apk add --no-cache     gcc     musl-dev     postgresql-dev     libffi-dev     openssl-dev     cargo     curl     gettext     git     make
#6 0.452 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/x86_64/APKINDEX.tar.gz
#6 0.696 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/x86_64/APKINDEX.tar.gz
#6 1.190 (1/58) Installing libgcc (13.2.1_git20240309-r0)
#6 1.195 (2/58) Installing jansson (2.14-r4)
#6 1.198 (3/58) Installing libstdc++ (13.2.1_git20240309-r0)
#6 1.225 (4/58) Installing zstd-libs (1.5.6-r0)
#6 1.238 (5/58) Installing binutils (2.42-r0)
#6 1.347 (6/58) Installing libgomp (13.2.1_git20240309-r0)
#6 1.355 (7/58) Installing libatomic (13.2.1_git20240309-r0)
#6 1.357 (8/58) Installing gmp (6.3.0-r1)
#6 1.366 (9/58) Installing isl26 (0.26-r1)
#6 1.390 (10/58) Installing mpfr4 (4.2.1-r0)
#6 1.402 (11/58) Installing mpc1 (1.3.1-r1)
#6 1.406 (12/58) Installing gcc (13.2.1_git20240309-r0)
#6 2.612 (13/58) Installing musl-dev (1.2.5-r0)
#6 2.718 (14/58) Installing libxml2 (2.12.7-r0)
#6 2.733 (15/58) Installing llvm17-libs (17.0.6-r1)
#6 4.037 (16/58) Installing scudo-malloc (17.0.6-r0)
#6 4.054 (17/58) Installing rust (1.78.0-r0)
#6 9.160 (18/58) Installing brotli-libs (1.1.0-r2)
#6 9.175 (19/58) Installing c-ares (1.28.1-r0)
#6 9.179 (20/58) Installing libunistring (1.2-r0)
#6 9.198 (21/58) Installing libidn2 (2.3.7-r0)
#6 9.203 (22/58) Installing nghttp2-libs (1.62.1-r0)
#6 9.207 (23/58) Installing libpsl (0.21.5-r1)
#6 9.211 (24/58) Installing libcurl (8.9.0-r0)
#6 9.222 (25/58) Installing cargo (1.78.0-r0)
#6 9.424 (26/58) Installing curl (8.9.0-r0)
#6 9.430 (27/58) Installing gettext-envsubst (0.22.5-r0)
#6 9.433 (28/58) Installing gettext-libs (0.22.5-r0)
#6 9.446 (29/58) Installing gettext (0.22.5-r0)
#6 9.476 (30/58) Installing pcre2 (10.43-r0)
#6 9.487 (31/58) Installing git (2.45.2-r0)
#6 9.578 (32/58) Installing git-init-template (2.45.2-r0)
#6 9.582 (33/58) Installing linux-headers (6.6-r0)
#6 12.90 (34/58) Installing pkgconf (2.2.0-r0)
#6 12.90 (35/58) Installing libffi-dev (3.4.6-r0)
#6 12.91 (36/58) Installing make (4.4.1-r2)
#6 12.91 (37/58) Installing openssl-dev (3.3.1-r3)
#6 12.94 (38/58) Installing libpq (16.3-r0)
#6 12.96 (39/58) Installing libpq-dev (16.3-r0)
#6 12.98 (40/58) Installing libecpg (16.3-r0)
#6 12.99 (41/58) Installing libecpg-dev (16.3-r0)
#6 13.01 (42/58) Installing clang16-headers (16.0.6-r5)
#6 13.08 (43/58) Installing llvm16-libs (16.0.6-r8)
#6 14.25 (44/58) Installing clang16-libs (16.0.6-r5)
#6 14.81 (45/58) Installing fortify-headers (1.1-r3)
#6 14.82 (46/58) Installing libstdc++-dev (13.2.1_git20240309-r0)
#6 15.10 (47/58) Installing llvm16-linker-tools (16.0.6-r8)
#6 15.10 (48/58) Installing clang16 (16.0.6-r5)
#6 15.12 (49/58) Installing icu-data-en (74.2-r0)
#6 15.15 Executing icu-data-en-74.2-r0.post-install
#6 15.16 *
#6 15.16 * If you need ICU with non-English locales and legacy charset support, install
#6 15.16 * package icu-data-full.
#6 15.16 *
#6 15.16 (50/58) Installing icu-libs (74.2-r0)
#6 15.20 (51/58) Installing icu (74.2-r0)
#6 15.22 (52/58) Installing icu-dev (74.2-r0)
#6 15.28 (53/58) Installing llvm16 (16.0.6-r8)
#6 16.42 (54/58) Installing lz4-libs (1.9.4-r5)
#6 16.42 (55/58) Installing lz4-dev (1.9.4-r5)
#6 16.43 (56/58) Installing zstd (1.5.6-r0)
#6 16.44 (57/58) Installing zstd-dev (1.5.6-r0)
#6 16.44 (58/58) Installing postgresql16-dev (16.3-r0)
#6 16.65 Executing busybox-1.36.1-r29.trigger
#6 16.66 OK: 1269 MiB in 95 packages
#6 DONE 41.3s

#7 [3/8] RUN curl -sSL https://install.python-poetry.org | python3 -     && poetry --version
#7 1.150 Retrieving Poetry metadata
#7 1.197 
#7 1.203 # Welcome to Poetry!
#7 1.203 
#7 1.203 This will download and install the latest version of Poetry,
#7 1.203 a dependency and package manager for Python.
#7 1.203 
#7 1.203 It will add the `poetry` command to Poetry's bin directory, located at:
#7 1.203 
#7 1.203 /root/.local/bin
#7 1.203 
#7 1.203 You can uninstall at any time by executing this script with the --uninstall option,
#7 1.203 and these changes will be reverted.
#7 1.203 
#7 1.204 Installing Poetry (1.2.2)
#7 1.204 Installing Poetry (1.2.2): Creating environment
#7 11.57 Installing Poetry (1.2.2): Installing Poetry
#7 32.09 Installing Poetry (1.2.2): Creating script
#7 32.09 Installing Poetry (1.2.2): Done
#7 32.09 
#7 32.09 Poetry (1.2.2) is installed now. Great!
#7 32.09 
#7 32.09 You can test that everything is set up by executing:
#7 32.09 
#7 32.09 `poetry --version`
#7 32.09 
#7 33.03 Poetry (version 1.2.2)
#7 DONE 35.0s

#8 [4/8] WORKDIR /project/
#8 DONE 0.4s

#9 [5/8] COPY pyproject.toml poetry.lock ./
#9 DONE 0.4s

#10 [6/8] RUN apk add --no-cache     yaml-dev
#10 0.660 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/x86_64/APKINDEX.tar.gz
#10 0.904 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/x86_64/APKINDEX.tar.gz
#10 1.398 (1/2) Installing yaml (0.2.5-r2)
#10 1.429 (2/2) Installing yaml-dev (0.2.5-r2)
#10 1.438 OK: 1269 MiB in 97 packages
#10 DONE 1.7s

#11 [7/8] RUN poetry install --extras psycopg2-binary
#11 1.890 Skipping virtualenv creation, as specified in config file.
#11 3.340 Installing dependencies from lock file
#11 5.945 
#11 5.945 Package operations: 68 installs, 1 update, 0 removals
#11 5.945 
#11 5.945   • Installing smmap (5.0.0)
#11 8.870   • Installing gitdb (4.0.10)
#11 8.872   • Installing mccabe (0.6.1)
#11 8.874   • Installing pbr (5.11.1)
#11 8.878   • Installing pycodestyle (2.8.0)
#11 8.880   • Installing pyflakes (2.4.0)
#11 11.67   • Installing docutils (0.19)
#11 11.67   • Installing flake8 (4.0.1)
#11 11.68   • Installing gitpython (3.1.30)
#11 11.68   • Installing pyyaml (6.0)
#11 11.68   • Installing snowballstemmer (2.2.0)
#11 11.68   • Installing stevedore (4.1.1)
#11 11.68   • Installing tzdata (2022.7)
#11 23.22 
#11 23.22   CalledProcessError
#11 23.22 
#11 23.22   Command '['/usr/local/bin/python3.11', '-m', 'pip', 'install', '--use-pep517', '--disable-pip-version-check', '--prefix', '/usr/local', '--no-deps', '/var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz']' returned non-zero exit status 1.
#11 23.22 
#11 23.22   at /usr/local/lib/python3.11/subprocess.py:571 in run
#11 23.34        567│             # We don't call process.wait() as .__exit__ does that for us.
#11 23.34        568│             raise
#11 23.34        569│         retcode = process.poll()
#11 23.34        570│         if check and retcode:
#11 23.34     →  571│             raise CalledProcessError(retcode, process.args,
#11 23.34        572│                                      output=stdout, stderr=stderr)
#11 23.34        573│     return CompletedProcess(process.args, retcode, stdout, stderr)
#11 23.34        574│ 
#11 23.34        575│ 
#11 23.34 
#11 23.34 The following error occurred when trying to handle this error:
#11 23.34 
#11 23.34 
#11 23.34   EnvCommandError
#11 23.34 
#11 23.34   Command ['/usr/local/bin/python3.11', '-m', 'pip', 'install', '--use-pep517', '--disable-pip-version-check', '--prefix', '/usr/local', '--no-deps', '/var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz'] errored with the following return code 1, and output: 
#11 23.34   Processing /var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz
#11 23.34     Installing build dependencies: started
#11 23.34     Installing build dependencies: finished with status 'done'
#11 23.34     Getting requirements to build wheel: started
#11 23.34     Getting requirements to build wheel: finished with status 'error'
#11 23.34     error: subprocess-exited-with-error
#11 23.34     
#11 23.34     × Getting requirements to build wheel did not run successfully.
#11 23.34     │ exit code: 1
#11 23.34     ╰─> [54 lines of output]
#11 23.34         running egg_info
#11 23.34         writing lib/PyYAML.egg-info/PKG-INFO
#11 23.34         writing dependency_links to lib/PyYAML.egg-info/dependency_links.txt
#11 23.34         writing top-level names to lib/PyYAML.egg-info/top_level.txt
#11 23.34         Traceback (most recent call last):
#11 23.34           File "/usr/local/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 353, in <module>
#11 23.34             main()
#11 23.34           File "/usr/local/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 335, in main
#11 23.34             json_out['return_val'] = hook(**hook_input['kwargs'])
#11 23.34                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#11 23.34           File "/usr/local/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 118, in get_requires_for_build_wheel
#11 23.34             return hook(config_settings)
#11 23.34                    ^^^^^^^^^^^^^^^^^^^^^
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/build_meta.py", line 327, in get_requires_for_build_wheel
#11 23.34             return self._get_build_requires(config_settings, requirements=[])
#11 23.34                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/build_meta.py", line 297, in _get_build_requires
#11 23.34             self.run_setup()
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/build_meta.py", line 313, in run_setup
#11 23.34             exec(code, locals())
#11 23.34           File "<string>", line 288, in <module>
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/__init__.py", line 108, in setup
#11 23.34             return distutils.core.setup(**attrs)
#11 23.34                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/_distutils/core.py", line 184, in setup
#11 23.34             return run_commands(dist)
#11 23.34                    ^^^^^^^^^^^^^^^^^^
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/_distutils/core.py", line 200, in run_commands
#11 23.34             dist.run_commands()
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/_distutils/dist.py", line 970, in run_commands
#11 23.34             self.run_command(cmd)
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/dist.py", line 945, in run_command
#11 23.34             super().run_command(command)
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/_distutils/dist.py", line 989, in run_command
#11 23.34             cmd_obj.run()
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 310, in run
#11 23.34             self.find_sources()
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 318, in find_sources
#11 23.34             mm.run()
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 539, in run
#11 23.34             self.add_defaults()
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 577, in add_defaults
#11 23.34             sdist.add_defaults(self)
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/command/sdist.py", line 102, in add_defaults
#11 23.34             super().add_defaults()
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/_distutils/command/sdist.py", line 250, in add_defaults
#11 23.34             self._add_defaults_ext()
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/_distutils/command/sdist.py", line 335, in _add_defaults_ext
#11 23.34             self.filelist.extend(build_ext.get_source_files())
#11 23.34                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#11 23.34           File "<string>", line 204, in get_source_files
#11 23.34           File "/tmp/pip-build-env-1rbshy6n/overlay/lib/python3.11/site-packages/setuptools/_distutils/cmd.py", line 107, in __getattr__
#11 23.34             raise AttributeError(attr)
#11 23.34         AttributeError: cython_sources
#11 23.34         [end of output]
#11 23.34     
#11 23.34     note: This error originates from a subprocess, and is likely not a problem with pip.
#11 23.34   error: subprocess-exited-with-error
#11 23.34   
#11 23.34   × Getting requirements to build wheel did not run successfully.
#11 23.34   │ exit code: 1
#11 23.34   ╰─> See above for output.
#11 23.34   
#11 23.34   note: This error originates from a subprocess, and is likely not a problem with pip.
#11 23.34   
#11 23.34 
#11 23.34   at ~/.local/share/pypoetry/venv/lib/python3.11/site-packages/poetry/utils/env.py:1476 in _run
#11 23.45       1472│                 output = subprocess.check_output(
#11 23.45       1473│                     command, stderr=subprocess.STDOUT, env=env, **kwargs
#11 23.45       1474│                 )
#11 23.45       1475│         except CalledProcessError as e:
#11 23.46     → 1476│             raise EnvCommandError(e, input=input_)
#11 23.46       1477│ 
#11 23.46       1478│         return decode(output)
#11 23.46       1479│ 
#11 23.46       1480│     def execute(self, bin: str, *args: str, **kwargs: Any) -> int:
#11 23.46 
#11 23.46 The following error occurred when trying to handle this error:
#11 23.46 
#11 23.46 
#11 23.46   PoetryException
#11 23.46 
#11 23.46   Failed to install /var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz
#11 23.46 
#11 23.46   at ~/.local/share/pypoetry/venv/lib/python3.11/site-packages/poetry/utils/pip.py:51 in pip_install
#11 23.46        47│ 
#11 23.46        48│     try:
#11 23.46        49│         return environment.run_pip(*args)
#11 23.46        50│     except EnvCommandError as e:
#11 23.46     →  51│         raise PoetryException(f"Failed to install {path.as_posix()}") from e
#11 23.46        52│ 
#11 23.46 
#11 ERROR: process "/bin/sh -c poetry install --extras psycopg2-binary" did not complete successfully: exit code: 1
------
 > [7/8] RUN poetry install --extras psycopg2-binary:
23.46   Failed to install /var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz
23.46 
23.46   at ~/.local/share/pypoetry/venv/lib/python3.11/site-packages/poetry/utils/pip.py:51 in pip_install
23.46        47│ 
23.46        48│     try:
23.46        49│         return environment.run_pip(*args)
23.46        50│     except EnvCommandError as e:
23.46     →  51│         raise PoetryException(f"Failed to install {path.as_posix()}") from e
23.46        52│ 
23.46 
------
v1_Dockerfile:36
--------------------
  34 |         yaml-dev
  35 |     
  36 | >>> RUN poetry install --extras psycopg2-binary
  37 |     
  38 |     WORKDIR /usr/local/src/hexlet-friends
--------------------
ERROR: failed to solve: process "/bin/sh -c poetry install --extras psycopg2-binary" did not complete successfully: exit code: 1
Duration: 1:49.13