#0 building with "default" instance using docker driver

#1 [internal] load build definition from v1_Dockerfile
#1 transferring dockerfile: 869B done
#1 DONE 0.0s

#2 [internal] load metadata for docker.io/library/python:3.11-alpine
#2 DONE 0.6s

#3 [internal] load .dockerignore
#3 transferring context: 242B done
#3 DONE 0.0s

#4 [internal] load build context
#4 transferring context: 97.86kB done
#4 DONE 0.0s

#5 [1/7] FROM docker.io/library/python:3.11-alpine@sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc
#5 resolve docker.io/library/python:3.11-alpine@sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc 0.0s done
#5 sha256:5f74a4572a891617b94ed3b365071de4276aff0f09a91a0ddfa9f388926e84bc 9.02kB / 9.02kB done
#5 sha256:0b67dc0654fc86ba05d925a0d5950a78282e6bb11c283215bb300d8ba18401c1 1.93kB / 1.93kB done
#5 sha256:bbec71259b0e09cf66965efb16e7480dd161e6e2da21d14e617863a4b7e32480 6.29kB / 6.29kB done
#5 sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 0B / 3.62MB 0.1s
#5 sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7 0B / 461.80kB 0.1s
#5 sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 0B / 12.67MB 0.1s
#5 sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 3.62MB / 3.62MB 0.2s
#5 sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 3.62MB / 3.62MB 0.2s done
#5 sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7 461.80kB / 461.80kB 0.3s done
#5 sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 3.15MB / 12.67MB 0.3s
#5 extracting sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 0.1s
#5 sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1 0B / 229B 0.3s
#5 sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 0B / 3.13MB 0.3s
#5 sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 12.67MB / 12.67MB 0.4s
#5 extracting sha256:c6a83fedfae6ed8a4f5f7cbb6a7b6f1c1ec3d86fea8cb9e5ba2e5e6673fde9f6 0.2s done
#5 sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1 229B / 229B 0.3s done
#5 extracting sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7
#5 sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 12.67MB / 12.67MB 0.4s done
#5 sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 3.13MB / 3.13MB 0.4s done
#5 extracting sha256:7ee56b2bb681231de28a0b9ef07f6b2cc88281aae9eb609811ffeb0be2aee4d7 0.1s done
#5 extracting sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7
#5 extracting sha256:bed00986c027d83e0da7822f5b24acbbd8839f0a0d113b50fbb3b09c2a44d1c7 0.6s done
#5 extracting sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1
#5 extracting sha256:d3cc4ee895667bf789d843fcfda3fcbc91247f09f2beac68174d743dc2b765f1 done
#5 extracting sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 0.1s
#5 extracting sha256:d3f60bffdf79a467e4b3580b524120f7ebb3e0fd9c164464149eb6c68032dd7d 0.3s done
#5 DONE 1.9s

#6 [2/7] RUN apk add --no-cache     gcc     musl-dev     postgresql-dev     libffi-dev     openssl-dev     cargo     curl     gettext     git     make
#6 0.164 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/main/x86_64/APKINDEX.tar.gz
#6 0.270 fetch https://dl-cdn.alpinelinux.org/alpine/v3.20/community/x86_64/APKINDEX.tar.gz
#6 0.559 (1/58) Installing libgcc (13.2.1_git20240309-r0)
#6 0.569 (2/58) Installing jansson (2.14-r4)
#6 0.579 (3/58) Installing libstdc++ (13.2.1_git20240309-r0)
#6 0.608 (4/58) Installing zstd-libs (1.5.6-r0)
#6 0.626 (5/58) Installing binutils (2.42-r0)
#6 0.718 (6/58) Installing libgomp (13.2.1_git20240309-r0)
#6 0.732 (7/58) Installing libatomic (13.2.1_git20240309-r0)
#6 0.741 (8/58) Installing gmp (6.3.0-r1)
#6 0.755 (9/58) Installing isl26 (0.26-r1)
#6 0.784 (10/58) Installing mpfr4 (4.2.1-r0)
#6 0.801 (11/58) Installing mpc1 (1.3.1-r1)
#6 0.811 (12/58) Installing gcc (13.2.1_git20240309-r0)
#6 1.895 (13/58) Installing musl-dev (1.2.5-r0)
#6 1.981 (14/58) Installing libxml2 (2.12.7-r0)
#6 2.002 (15/58) Installing llvm17-libs (17.0.6-r1)
#6 3.187 (16/58) Installing scudo-malloc (17.0.6-r0)
#6 3.196 (17/58) Installing rust (1.78.0-r0)
#6 7.696 (18/58) Installing brotli-libs (1.1.0-r2)
#6 7.714 (19/58) Installing c-ares (1.28.1-r0)
#6 7.724 (20/58) Installing libunistring (1.2-r0)
#6 7.748 (21/58) Installing libidn2 (2.3.7-r0)
#6 7.759 (22/58) Installing nghttp2-libs (1.62.1-r0)
#6 7.768 (23/58) Installing libpsl (0.21.5-r1)
#6 7.779 (24/58) Installing libcurl (8.9.0-r0)
#6 7.793 (25/58) Installing cargo (1.78.0-r0)
#6 7.998 (26/58) Installing curl (8.9.0-r0)
#6 8.011 (27/58) Installing gettext-envsubst (0.22.5-r0)
#6 8.021 (28/58) Installing gettext-libs (0.22.5-r0)
#6 8.043 (29/58) Installing gettext (0.22.5-r0)
#6 8.071 (30/58) Installing pcre2 (10.43-r0)
#6 8.089 (31/58) Installing git (2.45.2-r0)
#6 8.183 (32/58) Installing git-init-template (2.45.2-r0)
#6 8.192 (33/58) Installing linux-headers (6.6-r0)
#6 8.309 (34/58) Installing pkgconf (2.2.0-r0)
#6 8.320 (35/58) Installing libffi-dev (3.4.6-r0)
#6 8.330 (36/58) Installing make (4.4.1-r2)
#6 8.343 (37/58) Installing openssl-dev (3.3.1-r3)
#6 8.371 (38/58) Installing libpq (16.3-r0)
#6 8.386 (39/58) Installing libpq-dev (16.3-r0)
#6 8.407 (40/58) Installing libecpg (16.3-r0)
#6 8.418 (41/58) Installing libecpg-dev (16.3-r0)
#6 8.440 (42/58) Installing clang16-headers (16.0.6-r5)
#6 8.498 (43/58) Installing llvm16-libs (16.0.6-r8)
#6 9.582 (44/58) Installing clang16-libs (16.0.6-r5)
#6 10.12 (45/58) Installing fortify-headers (1.1-r3)
#6 10.13 (46/58) Installing libstdc++-dev (13.2.1_git20240309-r0)
#6 10.30 (47/58) Installing llvm16-linker-tools (16.0.6-r8)
#6 10.32 (48/58) Installing clang16 (16.0.6-r5)
#6 10.33 (49/58) Installing icu-data-en (74.2-r0)
#6 10.36 Executing icu-data-en-74.2-r0.post-install
#6 10.37 *
#6 10.37 * If you need ICU with non-English locales and legacy charset support, install
#6 10.37 * package icu-data-full.
#6 10.37 *
#6 10.37 (50/58) Installing icu-libs (74.2-r0)
#6 10.42 (51/58) Installing icu (74.2-r0)
#6 10.44 (52/58) Installing icu-dev (74.2-r0)
#6 10.49 (53/58) Installing llvm16 (16.0.6-r8)
#6 11.59 (54/58) Installing lz4-libs (1.9.4-r5)
#6 11.59 (55/58) Installing lz4-dev (1.9.4-r5)
#6 11.61 (56/58) Installing zstd (1.5.6-r0)
#6 11.62 (57/58) Installing zstd-dev (1.5.6-r0)
#6 11.63 (58/58) Installing postgresql16-dev (16.3-r0)
#6 11.75 Executing busybox-1.36.1-r29.trigger
#6 11.76 OK: 1269 MiB in 95 packages
#6 DONE 20.2s

#7 [3/7] RUN curl -sSL https://install.python-poetry.org | python3 -     && poetry --version
#7 0.594 Retrieving Poetry metadata
#7 0.677 
#7 0.679 # Welcome to Poetry!
#7 0.679 
#7 0.679 This will download and install the latest version of Poetry,
#7 0.679 a dependency and package manager for Python.
#7 0.679 
#7 0.679 It will add the `poetry` command to Poetry's bin directory, located at:
#7 0.679 
#7 0.679 /root/.local/bin
#7 0.679 
#7 0.679 You can uninstall at any time by executing this script with the --uninstall option,
#7 0.679 and these changes will be reverted.
#7 0.679 
#7 0.679 Installing Poetry (1.2.2)
#7 0.679 Installing Poetry (1.2.2): Creating environment
#7 8.392 Installing Poetry (1.2.2): Installing Poetry
#7 18.68 Installing Poetry (1.2.2): Creating script
#7 18.68 Installing Poetry (1.2.2): Done
#7 18.68 
#7 18.68 Poetry (1.2.2) is installed now. Great!
#7 18.68 
#7 18.68 You can test that everything is set up by executing:
#7 18.68 
#7 18.68 `poetry --version`
#7 18.68 
#7 19.41 Poetry (version 1.2.2)
#7 DONE 19.8s

#8 [4/7] WORKDIR /project/
#8 DONE 0.0s

#9 [5/7] COPY pyproject.toml poetry.lock ./
#9 DONE 0.0s

#10 [6/7] RUN poetry install --extras psycopg2-binary --no-root
#10 1.198 Skipping virtualenv creation, as specified in config file.
#10 2.335 Installing dependencies from lock file
#10 3.932 
#10 3.932 Package operations: 68 installs, 1 update, 0 removals
#10 3.932 
#10 3.932   • Installing smmap (5.0.0)
#10 6.230   • Installing gitdb (4.0.10)
#10 6.231   • Installing mccabe (0.6.1)
#10 6.232   • Installing pbr (5.11.1)
#10 6.232   • Installing pycodestyle (2.8.0)
#10 6.235   • Installing pyflakes (2.4.0)
#10 8.999   • Installing docutils (0.19)
#10 8.999   • Installing flake8 (4.0.1)
#10 8.999   • Installing gitpython (3.1.30)
#10 9.001   • Installing pyyaml (6.0)
#10 9.004   • Installing snowballstemmer (2.2.0)
#10 9.004   • Installing stevedore (4.1.1)
#10 9.005   • Installing tzdata (2022.7)
#10 18.28 
#10 18.28   CalledProcessError
#10 18.28 
#10 18.29   Command '['/usr/local/bin/python3.11', '-m', 'pip', 'install', '--use-pep517', '--disable-pip-version-check', '--prefix', '/usr/local', '--no-deps', '/var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz']' returned non-zero exit status 1.
#10 18.29 
#10 18.29   at /usr/local/lib/python3.11/subprocess.py:571 in run
#10 18.34        567│             # We don't call process.wait() as .__exit__ does that for us.
#10 18.34        568│             raise
#10 18.34        569│         retcode = process.poll()
#10 18.34        570│         if check and retcode:
#10 18.34     →  571│             raise CalledProcessError(retcode, process.args,
#10 18.34        572│                                      output=stdout, stderr=stderr)
#10 18.34        573│     return CompletedProcess(process.args, retcode, stdout, stderr)
#10 18.34        574│ 
#10 18.34        575│ 
#10 18.34 
#10 18.34 The following error occurred when trying to handle this error:
#10 18.34 
#10 18.34 
#10 18.34   EnvCommandError
#10 18.34 
#10 18.34   Command ['/usr/local/bin/python3.11', '-m', 'pip', 'install', '--use-pep517', '--disable-pip-version-check', '--prefix', '/usr/local', '--no-deps', '/var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz'] errored with the following return code 1, and output: 
#10 18.34   Processing /var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz
#10 18.34     Installing build dependencies: started
#10 18.34     Installing build dependencies: finished with status 'done'
#10 18.34     Getting requirements to build wheel: started
#10 18.34     Getting requirements to build wheel: finished with status 'error'
#10 18.34     error: subprocess-exited-with-error
#10 18.34     
#10 18.34     × Getting requirements to build wheel did not run successfully.
#10 18.34     │ exit code: 1
#10 18.34     ╰─> [54 lines of output]
#10 18.34         running egg_info
#10 18.34         writing lib/PyYAML.egg-info/PKG-INFO
#10 18.34         writing dependency_links to lib/PyYAML.egg-info/dependency_links.txt
#10 18.34         writing top-level names to lib/PyYAML.egg-info/top_level.txt
#10 18.34         Traceback (most recent call last):
#10 18.34           File "/usr/local/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 353, in <module>
#10 18.34             main()
#10 18.34           File "/usr/local/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 335, in main
#10 18.34             json_out['return_val'] = hook(**hook_input['kwargs'])
#10 18.34                                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#10 18.34           File "/usr/local/lib/python3.11/site-packages/pip/_vendor/pyproject_hooks/_in_process/_in_process.py", line 118, in get_requires_for_build_wheel
#10 18.34             return hook(config_settings)
#10 18.34                    ^^^^^^^^^^^^^^^^^^^^^
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/build_meta.py", line 327, in get_requires_for_build_wheel
#10 18.34             return self._get_build_requires(config_settings, requirements=[])
#10 18.34                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/build_meta.py", line 297, in _get_build_requires
#10 18.34             self.run_setup()
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/build_meta.py", line 313, in run_setup
#10 18.34             exec(code, locals())
#10 18.34           File "<string>", line 288, in <module>
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/__init__.py", line 108, in setup
#10 18.34             return distutils.core.setup(**attrs)
#10 18.34                    ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/_distutils/core.py", line 184, in setup
#10 18.34             return run_commands(dist)
#10 18.34                    ^^^^^^^^^^^^^^^^^^
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/_distutils/core.py", line 200, in run_commands
#10 18.34             dist.run_commands()
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/_distutils/dist.py", line 970, in run_commands
#10 18.34             self.run_command(cmd)
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/dist.py", line 945, in run_command
#10 18.34             super().run_command(command)
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/_distutils/dist.py", line 989, in run_command
#10 18.34             cmd_obj.run()
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 310, in run
#10 18.34             self.find_sources()
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 318, in find_sources
#10 18.34             mm.run()
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 539, in run
#10 18.34             self.add_defaults()
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/command/egg_info.py", line 577, in add_defaults
#10 18.34             sdist.add_defaults(self)
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/command/sdist.py", line 102, in add_defaults
#10 18.34             super().add_defaults()
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/_distutils/command/sdist.py", line 250, in add_defaults
#10 18.34             self._add_defaults_ext()
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/_distutils/command/sdist.py", line 335, in _add_defaults_ext
#10 18.34             self.filelist.extend(build_ext.get_source_files())
#10 18.34                                  ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
#10 18.34           File "<string>", line 204, in get_source_files
#10 18.34           File "/tmp/pip-build-env-yktbnofn/overlay/lib/python3.11/site-packages/setuptools/_distutils/cmd.py", line 107, in __getattr__
#10 18.34             raise AttributeError(attr)
#10 18.34         AttributeError: cython_sources
#10 18.34         [end of output]
#10 18.34     
#10 18.34     note: This error originates from a subprocess, and is likely not a problem with pip.
#10 18.34   error: subprocess-exited-with-error
#10 18.34   
#10 18.34   × Getting requirements to build wheel did not run successfully.
#10 18.34   │ exit code: 1
#10 18.34   ╰─> See above for output.
#10 18.34   
#10 18.34   note: This error originates from a subprocess, and is likely not a problem with pip.
#10 18.34   
#10 18.34 
#10 18.34   at ~/.local/share/pypoetry/venv/lib/python3.11/site-packages/poetry/utils/env.py:1476 in _run
#10 18.40       1472│                 output = subprocess.check_output(
#10 18.40       1473│                     command, stderr=subprocess.STDOUT, env=env, **kwargs
#10 18.40       1474│                 )
#10 18.40       1475│         except CalledProcessError as e:
#10 18.40     → 1476│             raise EnvCommandError(e, input=input_)
#10 18.40       1477│ 
#10 18.40       1478│         return decode(output)
#10 18.40       1479│ 
#10 18.40       1480│     def execute(self, bin: str, *args: str, **kwargs: Any) -> int:
#10 18.40 
#10 18.40 The following error occurred when trying to handle this error:
#10 18.40 
#10 18.40 
#10 18.40   PoetryException
#10 18.40 
#10 18.40   Failed to install /var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz
#10 18.40 
#10 18.40   at ~/.local/share/pypoetry/venv/lib/python3.11/site-packages/poetry/utils/pip.py:51 in pip_install
#10 18.40        47│ 
#10 18.40        48│     try:
#10 18.40        49│         return environment.run_pip(*args)
#10 18.40        50│     except EnvCommandError as e:
#10 18.40     →  51│         raise PoetryException(f"Failed to install {path.as_posix()}") from e
#10 18.40        52│ 
#10 18.40 
#10 ERROR: process "/bin/sh -c poetry install --extras psycopg2-binary --no-root" did not complete successfully: exit code: 1
------
 > [6/7] RUN poetry install --extras psycopg2-binary --no-root:
18.40   Failed to install /var/cache/pypoetry/artifacts/e5/57/8c/2d4a584ae8d468ddca661a2b283da64eddf788a4a2748cf1290953bb5a/PyYAML-6.0.tar.gz
18.40 
18.40   at ~/.local/share/pypoetry/venv/lib/python3.11/site-packages/poetry/utils/pip.py:51 in pip_install
18.40        47│ 
18.40        48│     try:
18.40        49│         return environment.run_pip(*args)
18.40        50│     except EnvCommandError as e:
18.40     →  51│         raise PoetryException(f"Failed to install {path.as_posix()}") from e
18.40        52│ 
18.40 
------
v1_Dockerfile:33
--------------------
  31 |     COPY pyproject.toml poetry.lock ./
  32 |     
  33 | >>> RUN poetry install --extras psycopg2-binary --no-root
  34 |     
  35 |     WORKDIR /usr/local/src/hexlet-friends
--------------------
ERROR: failed to solve: process "/bin/sh -c poetry install --extras psycopg2-binary --no-root" did not complete successfully: exit code: 1
Duration: 1:1.72