#0 building with "default" instance using docker driver

#1 [internal] load .dockerignore
#1 transferring context:
#1 transferring context: 228B done
#1 DONE 0.6s

#2 [internal] load build definition from Dockerfile
#2 transferring dockerfile: 3.79kB done
#2 DONE 0.7s

#3 [auth] library/ruby:pull token for registry-1.docker.io
#3 DONE 0.0s

#4 [internal] load metadata for docker.io/library/ruby:2.6.7-alpine3.13
#4 DONE 1.6s

#5 [internal] load build context
#5 DONE 0.0s

#6 [aquarium-development  1/14] FROM docker.io/library/ruby:2.6.7-alpine3.13@sha256:953af80c10f1769ebe7449f99c41eea7b98655c38d02feedfd1f7b718df9550b
#6 resolve docker.io/library/ruby:2.6.7-alpine3.13@sha256:953af80c10f1769ebe7449f99c41eea7b98655c38d02feedfd1f7b718df9550b
#6 resolve docker.io/library/ruby:2.6.7-alpine3.13@sha256:953af80c10f1769ebe7449f99c41eea7b98655c38d02feedfd1f7b718df9550b 0.2s done
#6 sha256:953af80c10f1769ebe7449f99c41eea7b98655c38d02feedfd1f7b718df9550b 1.65kB / 1.65kB done
#6 sha256:2ea734ab8ca6f749ae9c9c849831abc92974ccaa43105287cd5f29261073cd21 1.36kB / 1.36kB done
#6 sha256:ba6122d0680c3c7d9bb72ab14a2e5541a56b36bb9b29f5a4697feffa9b264e33 6.05kB / 6.05kB done
#6 sha256:540db60ca9383eac9e418f78490994d0af424aab7bf6d0e47ac8ed4e2e9bcbba 0B / 2.81MB 0.2s
#6 sha256:540db60ca9383eac9e418f78490994d0af424aab7bf6d0e47ac8ed4e2e9bcbba 2.81MB / 2.81MB 0.4s
#6 sha256:69c77620f6108dc0610cba72f77d68c271fb1b14cb0800a7a8b6aaeb8950fec9 0B / 222B 0.6s
#6 sha256:69c77620f6108dc0610cba72f77d68c271fb1b14cb0800a7a8b6aaeb8950fec9 222B / 222B 0.8s
#6 sha256:540db60ca9383eac9e418f78490994d0af424aab7bf6d0e47ac8ed4e2e9bcbba 2.81MB / 2.81MB 0.8s done
#6 extracting sha256:540db60ca9383eac9e418f78490994d0af424aab7bf6d0e47ac8ed4e2e9bcbba
#6 extracting sha256:540db60ca9383eac9e418f78490994d0af424aab7bf6d0e47ac8ed4e2e9bcbba 0.2s done
#6 sha256:98a867505730167ce0636f0811cb765ebbde11bf979c1a9839f6915f2fc3b85b 0B / 1.22MB 1.3s
#6 sha256:69c77620f6108dc0610cba72f77d68c271fb1b14cb0800a7a8b6aaeb8950fec9 222B / 222B 1.4s done
#6 sha256:98a867505730167ce0636f0811cb765ebbde11bf979c1a9839f6915f2fc3b85b 1.22MB / 1.22MB 1.5s
#6 sha256:e2a9e46cea192f318e0cbabc7376bdfbce057bb7f95099ea5b12f5bf6536c521 0B / 21.84MB 2.1s
#6 sha256:98a867505730167ce0636f0811cb765ebbde11bf979c1a9839f6915f2fc3b85b 1.22MB / 1.22MB 2.4s done
#6 sha256:e2a9e46cea192f318e0cbabc7376bdfbce057bb7f95099ea5b12f5bf6536c521 5.24MB / 21.84MB 2.5s
#6 extracting sha256:98a867505730167ce0636f0811cb765ebbde11bf979c1a9839f6915f2fc3b85b
#6 sha256:e2a9e46cea192f318e0cbabc7376bdfbce057bb7f95099ea5b12f5bf6536c521 11.53MB / 21.84MB 2.6s
#6 sha256:e2a9e46cea192f318e0cbabc7376bdfbce057bb7f95099ea5b12f5bf6536c521 16.78MB / 21.84MB 2.7s
#6 extracting sha256:98a867505730167ce0636f0811cb765ebbde11bf979c1a9839f6915f2fc3b85b 0.1s done
#6 sha256:e2a9e46cea192f318e0cbabc7376bdfbce057bb7f95099ea5b12f5bf6536c521 21.84MB / 21.84MB 2.9s
#6 sha256:e71489ac02567dcaa9964120349bfc7fde6e3c68b8d88cf849272d8a1b6d8831 171B / 171B 2.9s
#6 sha256:e2a9e46cea192f318e0cbabc7376bdfbce057bb7f95099ea5b12f5bf6536c521 21.84MB / 21.84MB 3.2s done
#6 sha256:e71489ac02567dcaa9964120349bfc7fde6e3c68b8d88cf849272d8a1b6d8831 171B / 171B 3.3s done
#6 extracting sha256:69c77620f6108dc0610cba72f77d68c271fb1b14cb0800a7a8b6aaeb8950fec9 done
#6 ...

#5 [internal] load build context
#5 transferring context: 10.01MB 3.6s done
#5 DONE 4.1s

#6 [aquarium-development  1/14] FROM docker.io/library/ruby:2.6.7-alpine3.13@sha256:953af80c10f1769ebe7449f99c41eea7b98655c38d02feedfd1f7b718df9550b
#6 extracting sha256:e2a9e46cea192f318e0cbabc7376bdfbce057bb7f95099ea5b12f5bf6536c521 0.1s
#6 extracting sha256:e2a9e46cea192f318e0cbabc7376bdfbce057bb7f95099ea5b12f5bf6536c521 1.0s done
#6 extracting sha256:e71489ac02567dcaa9964120349bfc7fde6e3c68b8d88cf849272d8a1b6d8831
#6 extracting sha256:e71489ac02567dcaa9964120349bfc7fde6e3c68b8d88cf849272d8a1b6d8831 done
#6 DONE 7.0s

#7 [aquarium-development  2/14] RUN apk add --update --no-cache     bash     bind-tools     build-base     ca-certificates     file     git     imagemagick     iptables     libgcrypt-dev     libxml2     libxslt     mariadb-dev     musl>1.2.2-r1     mysql-client     nodejs     nodejs-npm     openjdk8-jre     openssl     shared-mime-info     sqlite-dev     tzdata     wget     yarn
#7 ...

#8 [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system
#8 0.910 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
#8 1.142 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
#8 1.481 (1/83) Upgrading libcrypto1.1 (1.1.1k-r0 -> 1.1.1s-r0)
#8 2.595 (2/83) Upgrading libssl1.1 (1.1.1k-r0 -> 1.1.1s-r0)
#8 2.605 (3/83) Installing fstrm (0.6.0-r1)
#8 3.201 (4/83) Installing krb5-conf (1.0-r2)
#8 3.349 (5/83) Installing libcom_err (1.45.7-r0)
#8 3.503 (6/83) Installing keyutils-libs (1.6.3-r0)
#8 3.942 (7/83) Installing libverto (0.3.1-r1)
#8 4.107 (8/83) Installing krb5-libs (1.18.5-r0)
#8 4.136 (9/83) Installing json-c (0.15-r1)
#8 4.286 (10/83) Installing libprotobuf (3.13.0-r2)
#8 5.217 (11/83) Installing libprotoc (3.13.0-r2)
#8 5.396 (12/83) Installing protobuf-c (1.3.3-r4)
#8 5.884 (13/83) Installing libuv (1.40.0-r0)
#8 6.390 (14/83) Installing xz-libs (5.2.5-r1)
#8 6.396 (15/83) Installing libxml2 (2.9.14-r2)
#8 6.414 (16/83) Installing bind-libs (9.16.33-r0)
#8 7.088 (17/83) Installing bind-tools (9.16.33-r0)
#8 7.477 (18/83) Installing libmagic (5.39-r0)
#8 7.507 (19/83) Installing file (5.39-r0)
#8 7.511 (20/83) Installing libxau (1.0.9-r0)
#8 7.662 (21/83) Installing libbsd (0.10.0-r0)
#8 7.845 (22/83) Installing libxdmcp (1.1.3-r0)
#8 7.996 (23/83) Installing libxcb (1.14-r1)
#8 8.168 (24/83) Installing libx11 (1.7.1-r0)
#8 8.721 (25/83) Installing libxext (1.3.4-r0)
#8 8.908 (26/83) Installing libbz2 (1.0.8-r1)
#8 8.916 (27/83) Installing expat (2.2.10-r8)
#8 8.926 (28/83) Installing brotli-libs (1.0.9-r3)
#8 8.950 (29/83) Installing libpng (1.6.37-r1)
#8 8.957 (30/83) Installing freetype (2.10.4-r3)
#8 8.972 (31/83) Installing libuuid (2.37.4-r0)
#8 8.979 (32/83) Installing fontconfig (2.13.1-r3)
#8 9.284 (33/83) Installing lcms2 (2.11-r0)
#8 9.618 (34/83) Installing libltdl (2.4.6-r7)
#8 9.630 (35/83) Installing imagemagick-libs (7.0.11.14-r0)
#8 10.60 (36/83) Installing libxrender (0.9.10-r3)
#8 11.20 (37/83) Installing pixman (0.40.0-r3)
#8 11.87 (38/83) Installing cairo (1.16.0-r4)
#8 12.40 (39/83) Installing libblkid (2.37.4-r0)
#8 12.41 (40/83) Installing libmount (2.37.4-r0)
#8 12.43 (41/83) Installing pcre (8.44-r0)
#8 12.59 (42/83) Installing glib (2.66.8-r0)
#8 12.78 (43/83) Installing dbus-libs (1.12.24-r0)
#8 13.39 (44/83) Installing avahi-libs (0.8-r4)
#8 13.56 (45/83) Installing nettle (3.7.3-r0)
#8 13.72 (46/83) Installing p11-kit (0.23.22-r0)
#8 14.63 (47/83) Installing libtasn1 (4.16.0-r1)
#8 14.78 (48/83) Installing libunistring (0.9.10-r0)
#8 15.32 (49/83) Installing gnutls (3.7.1-r1)
#8 15.66 (50/83) Installing cups-libs (2.3.3-r2)
#8 15.82 (51/83) Installing jbig2dec (0.19-r0)
#8 16.02 (52/83) Installing libjpeg-turbo (2.1.0-r0)
#8 16.03 (53/83) Installing tiff (4.4.0-r0)
#8 16.04 (54/83) Installing ghostscript (9.53.3-r1)
#8 18.61 (55/83) Installing aom-libs (1.0.0-r1)
#8 19.35 (56/83) Installing libde265 (1.0.4-r0)
#8 19.55 (57/83) Installing x265-libs (3.4-r0)
#8 20.14 (58/83) Installing libheif (1.9.1-r0)
#8 20.30 (59/83) Installing cairo-gobject (1.16.0-r4)
#8 20.45 (60/83) Installing shared-mime-info (2.0-r0)
#8 20.64 (61/83) Installing gdk-pixbuf (2.42.4-r1)
#8 20.79 (62/83) Installing libxft (2.3.3-r0)
#8 20.94 (63/83) Installing fribidi (1.0.10-r0)
#8 21.10 (64/83) Installing graphite2 (1.3.14-r0)
#8 21.25 (65/83) Installing harfbuzz (2.7.4-r1)
#8 21.42 (66/83) Installing pango (1.48.2-r0)
#8 21.59 (67/83) Installing librsvg (2.50.4-r0)
#8 21.92 (68/83) Installing libwebp (1.1.0-r0)
#8 22.37 (69/83) Installing imagemagick (7.0.11.14-r0)
#8 23.07 (70/83) Installing libmnl (1.0.4-r1)
#8 23.22 (71/83) Installing libnftnl-libs (1.1.8-r0)
#8 23.43 (72/83) Installing iptables (1.8.6-r0)
#8 27.07 (73/83) Installing openssl-dev (1.1.1s-r0)
#8 34.29 (74/83) Installing mariadb-connector-c (3.1.11-r0)
#8 34.45 (75/83) Installing mariadb-connector-c-dev (3.1.11-r0)
#8 34.61 (76/83) Installing mariadb-common (10.5.17-r0)
#8 35.64 (77/83) Installing libaio (0.3.112-r1)
#8 35.79 (78/83) Installing pcre2 (10.36-r1)
#8 35.80 (79/83) Installing mariadb-embedded (10.5.17-r0)
#8 38.07 (80/83) Installing mariadb-dev (10.5.17-r0)
#8 38.36 (81/83) Installing mariadb-client (10.5.17-r0)
#8 38.84 (82/83) Installing mysql-client (10.5.17-r0)
#8 39.00 (83/83) Installing tzdata (2022f-r1)
#8 39.33 Executing busybox-1.32.1-r6.trigger
#8 39.34 Executing ca-certificates-20191127-r5.trigger
#8 39.38 Executing fontconfig-2.13.1-r3.trigger
#8 41.39 Executing shared-mime-info-2.0-r0.trigger
#8 71.73 Executing gdk-pixbuf-2.42.4-r1.trigger
#8 71.75 OK: 205 MiB in 117 packages
#8 ...

#7 [aquarium-development  2/14] RUN apk add --update --no-cache     bash     bind-tools     build-base     ca-certificates     file     git     imagemagick     iptables     libgcrypt-dev     libxml2     libxslt     mariadb-dev     musl>1.2.2-r1     mysql-client     nodejs     nodejs-npm     openjdk8-jre     openssl     shared-mime-info     sqlite-dev     tzdata     wget     yarn
#7 DONE 85.5s

#9 [aquarium-development  3/14] RUN wget -nv -O /etc/apk/keys/sgerrand.rsa.pub https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub &&     wget -nv https://github.com/sgerrand/alpine-pkg-glibc/releases/download/2.30-r0/glibc-2.30-r0.apk &&     apk add glibc-2.30-r0.apk &&     rm /etc/apk/keys/sgerrand.rsa.pub &&     rm glibc-2.30-r0.apk
#9 0.922 2024-07-31 22:13:05 URL:https://alpine-pkgs.sgerrand.com/sgerrand.rsa.pub [451/451] -> "/etc/apk/keys/sgerrand.rsa.pub" [1]
#9 1.707 2024-07-31 22:13:06 URL:https://objects.githubusercontent.com/github-production-release-asset-2e65be/33333969/946dab00-c1b4-11e9-987e-da37e3103482?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=releaseassetproduction%2F20240731%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20240731T221305Z&X-Amz-Expires=300&X-Amz-Signature=f7ab1927af11f5d1bd63b90a6f7f9c2f09ed7d7f663ef4ed1d3ea62c040cc706&X-Amz-SignedHeaders=host&actor_id=0&key_id=0&repo_id=33333969&response-content-disposition=attachment%3B%20filename%3Dglibc-2.30-r0.apk&response-content-type=application%2Fvnd.android.package-archive [4408199/4408199] -> "glibc-2.30-r0.apk" [1]
#9 1.722 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/main/x86_64/APKINDEX.tar.gz
#9 1.958 fetch https://dl-cdn.alpinelinux.org/alpine/v3.13/community/x86_64/APKINDEX.tar.gz
#9 2.391 (1/1) Installing glibc (2.30-r0)
#9 2.485 OK: 564 MiB in 170 packages
#9 DONE 3.0s

#8 [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system
#8 ...

#10 [aquarium-development  4/14] RUN mkdir /aquarium
#10 DONE 1.1s

#8 [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system
#8 ...

#11 [aquarium-development  5/14] WORKDIR /aquarium
#11 DONE 0.6s

#8 [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system
#8 ...

#12 [aquarium-development  6/14] COPY package.json ./package.json
#12 DONE 0.4s

#8 [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system
#8 ...

#13 [aquarium-development  7/14] COPY yarn.lock ./yarn.lock
#13 DONE 0.5s

#8 [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system
#8 ...

#14 [aquarium-development  8/14] RUN yarn install --modules-folder public/node_modules  && yarn cache clean
#14 1.165 yarn install v1.22.10
#14 1.247 [1/5] Validating package.json...
#14 1.251 [2/5] Resolving packages...
#14 1.341 [3/5] Fetching packages...
#14 7.575 [4/5] Linking dependencies...
#14 7.577 warning " > @bower_components/angular-material@1.1.26" has unmet peer dependency "angular@^1.7.2".
#14 7.577 warning " > @bower_components/angular-material@1.1.26" has unmet peer dependency "angular-animate@^1.7.2".
#14 7.577 warning " > @bower_components/angular-material@1.1.26" has unmet peer dependency "angular-aria@^1.7.2".
#14 7.577 warning " > @bower_components/angular-material@1.1.26" has unmet peer dependency "angular-messages@^1.7.2".
#14 7.577 warning " > @bower_components/jquery-file-upload@10.31.0" has unmet peer dependency "jquery@>=1.7".
#14 7.577 warning " > @bower_components/jquery-ujs@1.2.3" has unmet peer dependency "jquery@>=1.8.0".
#14 9.259 [5/5] Building fresh packages...
#14 9.271 $ node -e "try { require('fs').symlinkSync(require('path').resolve('public/node_modules/@bower_components'), 'public/components', 'junction') } catch (e) { console.log(e) }"
#14 9.372 Done in 8.22s.
#14 9.707 yarn cache v1.22.10
#14 10.57 success Cleared cache.
#14 10.57 Done in 0.88s.
#14 DONE 13.2s

#8 [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system
#8 ...

#15 [aquarium-development  9/14] COPY Gemfile Gemfile.lock ./
#15 DONE 0.7s

#8 [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system
#8 ...

#16 [aquarium-development 10/14] RUN mkdir -p /aquarium/components
#16 DONE 0.9s

#8 [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system
#8 ...

#17 [aquarium-development 11/14] COPY components ./components
#17 DONE 1.8s

#8 [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system
#8 ...

#18 [aquarium-development 12/14] RUN gem update --system  && gem install bundler --version '< 2.0'  && bundle install --jobs 20 --retry 5  && rm -f /usr/local/lib/ruby/gems/2.6.0/specifications/default/json-2.1.0.gemspec
#18 ...

#8 [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system
#8 117.8 ERROR:  Error installing rubygems-update:
#8 117.8 	There are no versions of rubygems-update (= 3.5.16) compatible with your Ruby & RubyGems
#8 117.8 	rubygems-update requires Ruby version >= 3.0.0. The current ruby version is 2.6.7.197.
#8 117.8 ERROR:  While executing gem ... (NoMethodError)
#8 117.8     undefined method `version' for nil:NilClass
#8 117.9 Updating rubygems-update
#8 ERROR: process "/bin/sh -c apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system" did not complete successfully: exit code: 1

#18 [aquarium-development 12/14] RUN gem update --system  && gem install bundler --version '< 2.0'  && bundle install --jobs 20 --retry 5  && rm -f /usr/local/lib/ruby/gems/2.6.0/specifications/default/json-2.1.0.gemspec
#18 CANCELED
------
 > [aquarium 2/5] RUN apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system:
39.38 Executing fontconfig-2.13.1-r3.trigger
41.39 Executing shared-mime-info-2.0-r0.trigger
71.73 Executing gdk-pixbuf-2.42.4-r1.trigger
71.75 OK: 205 MiB in 117 packages
117.8 ERROR:  Error installing rubygems-update:
117.8 	There are no versions of rubygems-update (= 3.5.16) compatible with your Ruby & RubyGems
117.8 	rubygems-update requires Ruby version >= 3.0.0. The current ruby version is 2.6.7.197.
117.8 ERROR:  While executing gem ... (NoMethodError)
117.8     undefined method `version' for nil:NilClass
117.9 Updating rubygems-update
------
Dockerfile:100
--------------------
  99 |     
 100 | >>> RUN apk add --update --no-cache \
 101 | >>>     bind-tools \
 102 | >>>     file \
 103 | >>>     imagemagick \
 104 | >>>     iptables \
 105 | >>>     mariadb-dev \
 106 | >>>     mysql-client \
 107 | >>>     shared-mime-info \
 108 | >>>     tzdata \
 109 | >>>  # make app directory
 110 | >>>  && mkdir /aquarium \
 111 | >>>  # make sure that using the same version of rubygems
 112 | >>>  && gem update --system
 113 |     
--------------------
ERROR: failed to solve: process "/bin/sh -c apk add --update --no-cache     bind-tools     file     imagemagick     iptables     mariadb-dev     mysql-client     shared-mime-info     tzdata  && mkdir /aquarium  && gem update --system" did not complete successfully: exit code: 1
Duration: 2:9.05